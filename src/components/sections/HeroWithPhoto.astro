---
import Breadcrumb from './Breadcrumb.astro';
import Button from '../ui/Button.astro';

interface Props {
  headline: string;
  description: string;
  breadcrumbs: Array<{ label: string; url: string }>;
  imageUrl?: string;
}

const { headline, description, breadcrumbs, imageUrl } = Astro.props;
const heroImage = imageUrl || '/images/placeholder.jpg';
---

<section class="relative w-full min-h-[60vh] flex items-center overflow-hidden pt-20 sm:pt-24">
  {/* ECG Line Animation Container */}
  <div id="ecg-container-photo" class="absolute top-[45%] left-0 w-full -translate-y-1/2 transition-opacity duration-1000 opacity-0">
    <svg
      viewBox="0 0 1200 120"
      preserveAspectRatio="none"
      class="w-full h-32 md:h-48 opacity-80"
    >
      <defs>
        <linearGradient id="line-gradient-photo" x1="0" y1="0" x2="1" y2="0">
          <stop offset="0%" stop-color="#4682B4" stop-opacity="0" /> 
          <stop offset="20%" stop-color="#4682B4" stop-opacity="0.8" />
          <stop offset="100%" stop-color="#000000" stop-opacity="0" />
        </linearGradient>
        <filter id="glow-photo">
          <feGaussianBlur stdDeviation="2" result="coloredBlur"/>
          <feMerge>
            <feMergeNode in="coloredBlur"/>
            <feMergeNode in="SourceGraphic"/>
          </feMerge>
        </filter>
        <path id="heartbeat-path-photo"
          d="M0,60 L200,60 L230,60 L240,40 L250,80 L260,20 L275,100 L290,60 L350,60 L380,60 L390,45 L400,75 L410,60 L600,60 L630,60 L640,30 L650,90 L665,60 L800,60 L830,60 L840,40 L850,80 L860,20 L875,100 L890,60 L1200,60"
        />
      </defs>

      <use href="#heartbeat-path-photo"
        fill="none"
        stroke="#1e293b"
        stroke-width="1"
        vector-effect="non-scaling-stroke"
        class="opacity-30 dark:opacity-100"
      />

      <use href="#heartbeat-path-photo"
        fill="none"
        stroke="url(#line-gradient-photo)"
        stroke-width="2"
        stroke-linecap="round"
        stroke-linejoin="round"
        class="animate-ecg-draw"
        style="stroke-dasharray: 1200; filter: url(#glow-photo);"
        vector-effect="non-scaling-stroke"
      />
    </svg>
  </div>

  <div class="container relative z-10 mx-auto px-4 sm:px-6 lg:px-8 py-8 sm:py-12">
    <Breadcrumb items={breadcrumbs} />
    
    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 sm:gap-8 lg:gap-12 items-center">
      {/* Left side - Content */}
      <div class="flex flex-col order-2 lg:order-1">
        <h1 class="text-3xl sm:text-4xl font-bold tracking-tight text-navy dark:text-white lg:text-5xl xl:text-6xl mb-4 sm:mb-6 leading-tight">
          {headline}
        </h1>
        <p class="text-base sm:text-lg text-gray-600 dark:text-gray-400 leading-relaxed mb-6 sm:mb-8 max-w-2xl">
          {description}
        </p>
        <div class="flex flex-col sm:flex-row gap-4">
          <Button variant="primary" size="lg" href="/contact" class="w-full sm:w-auto">
            Schedule Consultation
          </Button>
        </div>
      </div>

      {/* Right side - Image */}
      <div class="order-1 lg:order-2">
        <div class="aspect-[4/3] rounded-lg sm:rounded-xl overflow-hidden bg-gray-100 dark:bg-navy-dark/50 border border-navy/10 dark:border-white/10 shadow-lg">
          <img 
            src={heroImage}
            alt={headline}
            class="w-full h-full object-cover"
            loading="eager"
          />
        </div>
      </div>
    </div>
  </div>
</section>

<script>
  // Animate hero on load
  setTimeout(() => {
    const ecg = document.getElementById('ecg-container-photo');
    if (ecg) ecg.classList.add('opacity-100');
  }, 100);
</script>

